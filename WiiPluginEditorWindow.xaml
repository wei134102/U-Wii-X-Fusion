<Window x:Class="U_Wii_X_Fusion.WiiPluginEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WII æ’ä»¶ç¼–è¾‘å™¨" Height="900" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    <Window.Resources>
        <ContextMenu x:Key="PluginContextMenu">
            <MenuItem x:Name="miPluginEdit" Header="ç¼–è¾‘æ’ä»¶(æ‰“å¼€ ini)" Click="MenuEditPlugin_Click"/>
            <MenuItem x:Name="miPluginDelete" Header="åˆ é™¤æ’ä»¶(ç§»åŠ¨åˆ° bak)" Click="MenuDeletePlugin_Click"/>
        </ContextMenu>
        <ContextMenu x:Key="RomContextMenu">
            <MenuItem x:Name="miRomOpenFolder" Header="æ‰“å¼€ ROM æ‰€åœ¨æ–‡ä»¶å¤¹" Click="MenuOpenRomFolder_Click"/>
            <MenuItem x:Name="miRomAddCover" Header="æ·»åŠ ç¼ºå¤±å°é¢" Click="MenuAddMissingCover_Click"/>
        </ContextMenu>
        <ContextMenu x:Key="ImageContextMenu">
            <MenuItem x:Name="miImageOpenFolder" Header="æ‰“å¼€å›¾ç‰‡æ‰€åœ¨æ–‡ä»¶å¤¹" Click="MenuOpenImageFolder_Click"/>
            <MenuItem x:Name="miImageResize" Header="è°ƒæ•´å›¾ç‰‡å¤§å°" Click="MenuResizeImage_Click"/>
            <MenuItem x:Name="miImageRename" Header="é‡å‘½åå›¾ç‰‡" Click="MenuRenameImage_Click"/>
            <MenuItem x:Name="miImageConvert" Header="è½¬æ¢æ ¼å¼" Click="MenuConvertImage_Click"/>
        </ContextMenu>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- å·¥å…·æ  -->
        <Border Grid.Row="0" Background="#EEE" Padding="6,4" BorderBrush="#DDD" BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal">
                <Button x:Name="btnPin" Content="ðŸ“Œ ç½®é¡¶" Width="60" Padding="5,3" Margin="0,0,6,0" Click="BtnPin_Click" ToolTip="åˆ‡æ¢çª—å£ç½®é¡¶"/>
                <Button x:Name="btnPluginsDir" Content="æ’ä»¶ç›®å½•" Width="80" Padding="5,3" Margin="0,0,6,0" Click="BtnPluginsDir_Click" ToolTip="é€‰æ‹©æ’ä»¶é…ç½®ç›®å½•"/>
                <Button x:Name="btnImagesDir" Content="å›¾ç‰‡ç›®å½•" Width="80" Padding="5,3" Margin="0,0,6,0" Click="BtnImagesDir_Click" ToolTip="é€‰æ‹©å›¾ç‰‡ç›®å½•"/>
                <Button x:Name="btnTitlesFile" Content="æ ‡é¢˜æ–‡ä»¶" Width="80" Padding="5,3" Margin="0,0,6,0" Click="BtnTitlesFile_Click" ToolTip="é€‰æ‹©è‡ªå®šä¹‰æ ‡é¢˜æ–‡ä»¶"/>
                <Button x:Name="btnRomsDir" Content="ROMç›®å½•" Width="80" Padding="5,3" Margin="0,0,6,0" Click="BtnRomsDir_Click" ToolTip="é€‰æ‹©ROMç›®å½•"/>
                <Separator Margin="8,0"/>
                <Button x:Name="btnScanPlugins" Content="ðŸ”„ æ‰«ææ’ä»¶" Width="90" Padding="5,3" Margin="0,0,6,0" Click="BtnScanPlugins_Click" ToolTip="æ‰«æå¹¶åŠ è½½æ’ä»¶"/>
                <CheckBox x:Name="chkSubdirs" Content="æ‰«æå­ç›®å½•" IsChecked="True" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <Button x:Name="btnOpenTitles" Content="æ‰“å¼€è‡ªå®šä¹‰æ ‡é¢˜" Width="110" Padding="5,3" Margin="0,0,6,0" Click="BtnOpenTitles_Click" ToolTip="ç”¨ç³»ç»Ÿé»˜è®¤ç¨‹åºæ‰“å¼€æ ‡é¢˜æ–‡ä»¶"/>
                <Button x:Name="btnMameToTitles" Content="MAMEåˆ—è¡¨â†’æ ‡é¢˜" Width="110" Padding="5,3" Margin="0,0,6,0" Click="BtnMameToTitles_Click" ToolTip="ä»Ž mame_cn.lst ç”Ÿæˆæ ‡é¢˜"/>
                <Button x:Name="btnLang" Content="ðŸŒ è¯­è¨€" Width="60" Padding="5,3" Margin="0,0,6,0" Click="BtnLang_Click"/>
                <CheckBox x:Name="chkLog" Content="æ—¥å¿—" VerticalAlignment="Center" Margin="0,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- ä¸‰æ ï¼šæ’ä»¶åˆ—è¡¨ | ROMè¡¨æ ¼ | å›¾ç‰‡è¡¨æ ¼+é¢„è§ˆ -->
        <Grid Grid.Row="1" Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="400"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦ä¾§ï¼šæ’ä»¶åˆ—è¡¨ -->
            <Border Grid.Column="0" Background="White" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4" Padding="4" Margin="0,0,4,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock x:Name="lblPluginList" Grid.Row="0" Text="æ’ä»¶åˆ—è¡¨" FontWeight="Bold" Margin="0,0,0,4"/>
                    <ListBox x:Name="listPlugins" Grid.Row="1" SelectionChanged="ListPlugins_SelectionChanged"
                             ContextMenu="{StaticResource PluginContextMenu}"
                             DisplayMemberPath="DisplayName"/>
                </Grid>
            </Border>

            <!-- ä¸­é—´ï¼šROM åˆ—è¡¨ -->
            <Border Grid.Column="1" Background="White" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4" Padding="4" Margin="4,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,4">
                        <TextBlock x:Name="lblRomList" Text="ROMåˆ—è¡¨" FontWeight="Bold"/>
                        <TextBlock x:Name="txtRomCount" Text="(0)" Margin="8,0,0,0" Foreground="#666"/>
                        <TextBlock x:Name="txtMissingCover" Text="" Margin="12,0,0,0" Foreground="Red" FontWeight="SemiBold"/>
                    </StackPanel>
                    <DataGrid x:Name="dgRoms" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="False"
                              CanUserAddRows="False" CanUserDeleteRows="False" SelectionMode="Single"
                              ContextMenu="{StaticResource RomContextMenu}"
                              CellEditEnding="DgRoms_CellEditEnding">
                        <DataGrid.Columns>
                            <DataGridTextColumn x:Name="colRomFileName" Header="æ–‡ä»¶å" Binding="{Binding FileName}" Width="*" IsReadOnly="True"/>
                            <DataGridTextColumn x:Name="colRomDisplayName" Header="æ˜¾ç¤ºåç§°" Binding="{Binding DisplayName}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>

            <!-- å³ä¾§ï¼šå›¾ç‰‡åˆ—è¡¨ + é¢„è§ˆ -->
            <Border Grid.Column="2" Background="White" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4" Padding="4" Margin="4,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="2*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,4">
                        <TextBlock x:Name="lblImageList" Text="å›¾ç‰‡åˆ—è¡¨" FontWeight="Bold"/>
                        <TextBlock x:Name="txtImageCount" Text="(0)" Margin="8,0,0,0" Foreground="#666"/>
                    </StackPanel>
                    <DataGrid x:Name="dgImages" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True"
                              CanUserAddRows="False" SelectionMode="Single"
                              ContextMenu="{StaticResource ImageContextMenu}"
                              SelectionChanged="DgImages_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn x:Name="colImageFileName" Header="æ–‡ä»¶å" Binding="{Binding FileName}" Width="*"/>
                            <DataGridTextColumn x:Name="colImageResolution" Header="åˆ†è¾¨çŽ‡" Binding="{Binding Resolution}" Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Border Grid.Row="2" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0" Margin="0,4,0,0">
                        <Image x:Name="imgPreview" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </Grid>
            </Border>
        </Grid>

        <!-- åº•éƒ¨è·¯å¾„æ ‡ç­¾ -->
        <Border Grid.Row="2" Background="#EEE" Padding="8,6" BorderBrush="#DDD" BorderThickness="0,1,0,0">
            <StackPanel>
                <TextBlock x:Name="txtPluginsPath" Text="æ’ä»¶ç›®å½•: æœªé€‰æ‹©" FontSize="11" Foreground="#333"/>
                <TextBlock x:Name="txtRomsPath" Text="ROMç›®å½•: æœªé€‰æ‹©" FontSize="11" Foreground="#333"/>
                <TextBlock x:Name="txtImagesPath" Text="å›¾ç‰‡ç›®å½•: æœªé€‰æ‹©" FontSize="11" Foreground="#333"/>
                <TextBlock x:Name="txtTitlesPath" Text="è‡ªå®šä¹‰æ ‡é¢˜æ–‡ä»¶: æœªé€‰æ‹©" FontSize="11" Foreground="#333"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
